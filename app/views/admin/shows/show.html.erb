<% content_for :extra_show_actions do %>
    <% if @show.xts_id && can?(:edit, @show) %>
        <%= link_to xts_report_admin_show_path(@show), class: "btn btn-secondary" do %>
            <i class='fas fa-shopping-basket' aria-hidden=”true”></i> XTS Report
        <% end %>
    <% end %>

    <%= get_link Admin::Feedback, :new, link_text: "Submit Feedback", link_target: new_admin_show_feedback_path(@show), html_class: 'btn btn-secondary' %>

    <%= get_link Admin::Feedback, :index, link_text: 'Show Feedback', link_target: admin_show_feedbacks_path(@show), 
                additional_condition: @show.feedbacks.any? 
    %>

    <%= get_link @show, :convert_to_season, condition: can?(:create, Season) && can?(:destroy, @show), http_method: :post,
                confirm: "Converting Show #{@show.name} into Season", detail: "Are you sure you want to convert the Show into a Season? Make sure there are no reviews or feedbacks attached before proceeding. You cannot undo this action." 
    %>

    <%= get_link @show, :convert_to_workshop, condition: can?(:create, Workshop) && can?(:destroy, @show), http_method: :post,
                confirm: "Converting Show #{@show.name} into Season", detail: "Are you sure you want to convert the Show into a Workshop? Make sure there are no reviews or feedbacks attached before proceeding. You cannot undo this action." 
    %>
<% end %>

<% extra_fields = {
  reviews:   { type: 'content', header: 'Reviews', content: render('/admin/events/reviews', reviews: @show.reviews) }
} %>

<% # Only show the Debt stuff if the show is in the current academic year. %>
<% if @show.end_date > start_of_year && (can?(:create, Admin::MaintenanceDebt) || can?(:create, Admin::StaffingDebt)) %>
    <% content_for :debt_settings do %>
        <%= render 'admin/events/debt_settings_form', event: @show %>
    <% end %>

    <% extra_fields[:debt_settings] = { type: 'content', header: 'Debt Settings', content: yield(:debt_settings) } %>
<% end %>

<%= render('admin/events/basic_show', event: @show, extra_fields: extra_fields) %>
